================================================================================
EJERCICIO 4: SINCRONIZACIÓN - CONTADOR COMPARTIDO - 2 PUNTOS
================================================================================

1. ¿Qué deberías ver?
--------------------------------------------------------------------------------

Con synchronized: Valor esperado 2000000, valor real 2000000 (siempre exacto).
[CAPTURA 1]

Sin synchronized: Valor esperado 2000000, valor real ~1.8M-1.9M (varía en cada 
ejecución). Esto son condiciones de carrera.
[CAPTURA 2]


2. Explica el motivo
--------------------------------------------------------------------------------

La operación valor++ no es atómica, se compone de tres pasos: leer, incrementar 
y escribir. Sin synchronized, dos hilos pueden leer el mismo valor (ej: 100), 
ambos incrementarlo a 101 y escribir, perdiendo un incremento (debería ser 102). 
Con 2 millones de incrementos concurrentes, se pierden miles de actualizaciones.

Con synchronized se garantiza exclusión mutua: solo un hilo ejecuta 
incrementar() a la vez, haciendo los tres pasos atómicos sin interferencias.


3. Añade más hilos y analízalo
--------------------------------------------------------------------------------

Con 4 hilos (valor esperado: 4000000):
[CAPTURA 3 - Sin synchronized]
[CAPTURA 4 - Con synchronized]

Sin synchronized: El error es mayor (~3.5M-3.8M). Más hilos = más condiciones 
de carrera.

Con synchronized: Valor real siempre 4000000 (exacto). Mayor tiempo de ejecución 
por contención del lock, pero resultado correcto.

Conclusión: synchronized es esencial para operaciones no atómicas en recursos 
compartidos. Costo en rendimiento, pero garantiza corrección.

================================================================================

